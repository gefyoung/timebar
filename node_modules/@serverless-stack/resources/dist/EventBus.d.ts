import { Construct } from "constructs";
import * as events from "aws-cdk-lib/aws-events";
import * as eventsTargets from "aws-cdk-lib/aws-events-targets";
import { Queue } from "./Queue";
import { SSTConstruct } from "./Construct";
import { FunctionProps, FunctionDefinition } from "./Function";
import { Permissions } from "./util/permission";
export declare type EventBusProps = {
    readonly eventBridgeEventBus?: events.IEventBus | events.EventBusProps;
    readonly rules?: {
        [key: string]: EventBusCdkRuleProps;
    };
    readonly defaultFunctionProps?: FunctionProps;
};
export declare type EventBusCdkRuleProps = Omit<events.RuleProps, "eventBus" | "targets"> & {
    readonly targets?: (FunctionDefinition | EventBusFunctionTargetProps | Queue | EventBusQueueTargetProps)[];
};
export declare type EventBusFunctionTargetProps = {
    readonly function: FunctionDefinition;
    readonly targetProps?: eventsTargets.LambdaFunctionProps;
};
export declare type EventBusQueueTargetProps = {
    readonly queue: Queue;
    readonly targetProps?: eventsTargets.SqsQueueProps;
};
export declare class EventBus extends Construct implements SSTConstruct {
    readonly eventBridgeEventBus: events.IEventBus;
    private readonly targetsData;
    private readonly permissionsAttachedForAllTargets;
    private readonly defaultFunctionProps?;
    constructor(scope: Construct, id: string, props?: EventBusProps);
    get eventBusArn(): string;
    get eventBusName(): string;
    addRules(scope: Construct, rules: {
        [key: string]: EventBusCdkRuleProps;
    }): void;
    attachPermissions(permissions: Permissions): void;
    attachPermissionsToTarget(ruleKey: string, targetIndex: number, permissions: Permissions): void;
    getConstructMetadata(): {
        type: "EventBus";
        data: {
            eventBusName: string;
            rules: {
                key: string;
                targets: ({
                    node: string;
                    stack: string;
                } | undefined)[];
            }[];
        };
    };
    private addRule;
    private addTarget;
    private addQueueTarget;
    private addFunctionTarget;
}
