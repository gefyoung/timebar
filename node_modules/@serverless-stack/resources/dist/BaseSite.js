"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getBuildCmdEnvironment = exports.buildErrorResponsesFor404ErrorPage = exports.buildErrorResponsesForRedirectToIndex = void 0;
const cdk = __importStar(require("aws-cdk-lib"));
function buildErrorResponsesForRedirectToIndex(indexPage) {
    return [
        {
            httpStatus: 403,
            responsePagePath: `/${indexPage}`,
            responseHttpStatus: 200,
        },
        {
            httpStatus: 404,
            responsePagePath: `/${indexPage}`,
            responseHttpStatus: 200,
        },
    ];
}
exports.buildErrorResponsesForRedirectToIndex = buildErrorResponsesForRedirectToIndex;
function buildErrorResponsesFor404ErrorPage(errorPage) {
    return [
        {
            httpStatus: 403,
            responsePagePath: `/${errorPage}`,
        },
        {
            httpStatus: 404,
            responsePagePath: `/${errorPage}`,
        },
    ];
}
exports.buildErrorResponsesFor404ErrorPage = buildErrorResponsesFor404ErrorPage;
/////////////////////
// Helper Functions
/////////////////////
function getBuildCmdEnvironment(siteEnvironment) {
    // Generate environment placeholders to be replaced
    // ie. environment => { API_URL: api.url }
    //     environment => API_URL="{{ API_URL }}"
    //
    const buildCmdEnvironment = {};
    Object.entries(siteEnvironment || {}).forEach(([key, value]) => {
        buildCmdEnvironment[key] = cdk.Token.isUnresolved(value)
            ? `{{ ${key} }}`
            : value;
    });
    return buildCmdEnvironment;
}
exports.getBuildCmdEnvironment = getBuildCmdEnvironment;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmFzZVNpdGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvQmFzZVNpdGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLGlEQUFtQztBQTBCbkMsU0FBZ0IscUNBQXFDLENBQ25ELFNBQWlCO0lBRWpCLE9BQU87UUFDTDtZQUNFLFVBQVUsRUFBRSxHQUFHO1lBQ2YsZ0JBQWdCLEVBQUUsSUFBSSxTQUFTLEVBQUU7WUFDakMsa0JBQWtCLEVBQUUsR0FBRztTQUN4QjtRQUNEO1lBQ0UsVUFBVSxFQUFFLEdBQUc7WUFDZixnQkFBZ0IsRUFBRSxJQUFJLFNBQVMsRUFBRTtZQUNqQyxrQkFBa0IsRUFBRSxHQUFHO1NBQ3hCO0tBQ0YsQ0FBQztBQUNKLENBQUM7QUFmRCxzRkFlQztBQUVELFNBQWdCLGtDQUFrQyxDQUNoRCxTQUFpQjtJQUVqQixPQUFPO1FBQ0w7WUFDRSxVQUFVLEVBQUUsR0FBRztZQUNmLGdCQUFnQixFQUFFLElBQUksU0FBUyxFQUFFO1NBQ2xDO1FBQ0Q7WUFDRSxVQUFVLEVBQUUsR0FBRztZQUNmLGdCQUFnQixFQUFFLElBQUksU0FBUyxFQUFFO1NBQ2xDO0tBQ0YsQ0FBQztBQUNKLENBQUM7QUFiRCxnRkFhQztBQU9ELHFCQUFxQjtBQUNyQixtQkFBbUI7QUFDbkIscUJBQXFCO0FBRXJCLFNBQWdCLHNCQUFzQixDQUFDLGVBRXRDO0lBQ0MsbURBQW1EO0lBQ25ELDBDQUEwQztJQUMxQyw2Q0FBNkM7SUFDN0MsRUFBRTtJQUNGLE1BQU0sbUJBQW1CLEdBQTJCLEVBQUUsQ0FBQztJQUN2RCxNQUFNLENBQUMsT0FBTyxDQUFDLGVBQWUsSUFBSSxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsRUFBRSxFQUFFO1FBQzdELG1CQUFtQixDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQztZQUN0RCxDQUFDLENBQUMsTUFBTSxHQUFHLEtBQUs7WUFDaEIsQ0FBQyxDQUFDLEtBQUssQ0FBQztJQUNaLENBQUMsQ0FBQyxDQUFDO0lBRUgsT0FBTyxtQkFBbUIsQ0FBQztBQUM3QixDQUFDO0FBZkQsd0RBZUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBjZGsgZnJvbSBcImF3cy1jZGstbGliXCI7XG5pbXBvcnQgKiBhcyByb3V0ZTUzIGZyb20gXCJhd3MtY2RrLWxpYi9hd3Mtcm91dGU1M1wiO1xuaW1wb3J0ICogYXMgY2xvdWRmcm9udCBmcm9tIFwiYXdzLWNkay1saWIvYXdzLWNsb3VkZnJvbnRcIjtcbmltcG9ydCAqIGFzIGFjbSBmcm9tIFwiYXdzLWNkay1saWIvYXdzLWNlcnRpZmljYXRlbWFuYWdlclwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VTaXRlRG9tYWluUHJvcHMge1xuICBkb21haW5OYW1lOiBzdHJpbmc7XG4gIGRvbWFpbkFsaWFzPzogc3RyaW5nO1xuICBob3N0ZWRab25lPzogc3RyaW5nIHwgcm91dGU1My5JSG9zdGVkWm9uZTtcbiAgY2VydGlmaWNhdGU/OiBhY20uSUNlcnRpZmljYXRlO1xuICBhbHRlcm5hdGVOYW1lcz86IHN0cmluZ1tdO1xuICBpc0V4dGVybmFsRG9tYWluPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXNlU2l0ZUVudmlyb25tZW50T3V0cHV0c0luZm8ge1xuICByZWFkb25seSBwYXRoOiBzdHJpbmc7XG4gIHJlYWRvbmx5IHN0YWNrOiBzdHJpbmc7XG4gIHJlYWRvbmx5IGVudmlyb25tZW50T3V0cHV0czogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXNlU2l0ZVJlcGxhY2VQcm9wcyB7XG4gIHJlYWRvbmx5IGZpbGVzOiBzdHJpbmc7XG4gIHJlYWRvbmx5IHNlYXJjaDogc3RyaW5nO1xuICByZWFkb25seSByZXBsYWNlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZEVycm9yUmVzcG9uc2VzRm9yUmVkaXJlY3RUb0luZGV4KFxuICBpbmRleFBhZ2U6IHN0cmluZ1xuKTogY2xvdWRmcm9udC5FcnJvclJlc3BvbnNlW10ge1xuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIGh0dHBTdGF0dXM6IDQwMyxcbiAgICAgIHJlc3BvbnNlUGFnZVBhdGg6IGAvJHtpbmRleFBhZ2V9YCxcbiAgICAgIHJlc3BvbnNlSHR0cFN0YXR1czogMjAwLFxuICAgIH0sXG4gICAge1xuICAgICAgaHR0cFN0YXR1czogNDA0LFxuICAgICAgcmVzcG9uc2VQYWdlUGF0aDogYC8ke2luZGV4UGFnZX1gLFxuICAgICAgcmVzcG9uc2VIdHRwU3RhdHVzOiAyMDAsXG4gICAgfSxcbiAgXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkRXJyb3JSZXNwb25zZXNGb3I0MDRFcnJvclBhZ2UoXG4gIGVycm9yUGFnZTogc3RyaW5nXG4pOiBjbG91ZGZyb250LkVycm9yUmVzcG9uc2VbXSB7XG4gIHJldHVybiBbXG4gICAge1xuICAgICAgaHR0cFN0YXR1czogNDAzLFxuICAgICAgcmVzcG9uc2VQYWdlUGF0aDogYC8ke2Vycm9yUGFnZX1gLFxuICAgIH0sXG4gICAge1xuICAgICAgaHR0cFN0YXR1czogNDA0LFxuICAgICAgcmVzcG9uc2VQYWdlUGF0aDogYC8ke2Vycm9yUGFnZX1gLFxuICAgIH0sXG4gIF07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFzZVNpdGVDZGtEaXN0cmlidXRpb25Qcm9wc1xuICBleHRlbmRzIE9taXQ8Y2xvdWRmcm9udC5EaXN0cmlidXRpb25Qcm9wcywgXCJkZWZhdWx0QmVoYXZpb3JcIj4ge1xuICByZWFkb25seSBkZWZhdWx0QmVoYXZpb3I/OiBjbG91ZGZyb250LkFkZEJlaGF2aW9yT3B0aW9ucztcbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBIZWxwZXIgRnVuY3Rpb25zXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEJ1aWxkQ21kRW52aXJvbm1lbnQoc2l0ZUVudmlyb25tZW50Pzoge1xuICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XG59KTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG4gIC8vIEdlbmVyYXRlIGVudmlyb25tZW50IHBsYWNlaG9sZGVycyB0byBiZSByZXBsYWNlZFxuICAvLyBpZS4gZW52aXJvbm1lbnQgPT4geyBBUElfVVJMOiBhcGkudXJsIH1cbiAgLy8gICAgIGVudmlyb25tZW50ID0+IEFQSV9VUkw9XCJ7eyBBUElfVVJMIH19XCJcbiAgLy9cbiAgY29uc3QgYnVpbGRDbWRFbnZpcm9ubWVudDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICBPYmplY3QuZW50cmllcyhzaXRlRW52aXJvbm1lbnQgfHwge30pLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgIGJ1aWxkQ21kRW52aXJvbm1lbnRba2V5XSA9IGNkay5Ub2tlbi5pc1VucmVzb2x2ZWQodmFsdWUpXG4gICAgICA/IGB7eyAke2tleX0gfX1gXG4gICAgICA6IHZhbHVlO1xuICB9KTtcblxuICByZXR1cm4gYnVpbGRDbWRFbnZpcm9ubWVudDtcbn1cbiJdfQ==