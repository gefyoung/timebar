"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.instructions = exports.resolve = exports.bundle = exports.build = void 0;
const node_1 = require("./node");
const go_1 = require("./go");
const python_1 = require("./python");
const dotnet_1 = require("./dotnet");
async function build(opts) {
    const instructions = resolve(opts.runtime)(opts);
    if (!instructions.build)
        return;
    return instructions.build();
}
exports.build = build;
function bundle(opts) {
    const ins = instructions(opts);
    if (!ins.bundle)
        return;
    return ins.bundle();
}
exports.bundle = bundle;
function resolve(runtime) {
    if (runtime.startsWith("node"))
        return node_1.NodeHandler;
    if (runtime.startsWith("go"))
        return go_1.GoHandler;
    if (runtime.startsWith("python"))
        return python_1.PythonHandler;
    if (runtime.startsWith("dotnetcore"))
        return dotnet_1.DotnetHandler;
    throw new Error(`Unknown runtime ${runtime}`);
}
exports.resolve = resolve;
function instructions(opts) {
    const handler = resolve(opts.runtime);
    return handler(opts);
}
exports.instructions = instructions;
